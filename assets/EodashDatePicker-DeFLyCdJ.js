import{p as I,o as O,g as R,y as $,am as F,c as m,r as D,d as b,a as j,b as v,an as Y,ao as B,K as H,ap as U,aq as L,ar as q,as as z,at as N,w as G,P as K,Y as Q,au as W,S as p,U as C,av as J,F as X,aw as S,ax as k,Q as V,a0 as x,ay as Z,az as tt,t as T,R as P,aA as A,aB as et,V as _,aC as at,L as nt,aD as w}from"./index-XLkOeDcy.js";import{m as ot,V as E}from"./VOverlay-Dpz0n-Ib.js";import{b as st,f as rt}from"./forwardRefs-BwS2Nnxc.js";import"./transition-BqMLhQhw.js";const it=I({id:String,text:String,...O(ot({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),lt=R()({name:"VTooltip",props:it(),emits:{"update:modelValue":t=>!0},setup(t,i){let{slots:l}=i;const e=$(t,"modelValue"),{scopeId:u}=st(),c=F(),o=m(()=>t.id||`v-tooltip-${c}`),a=D(),n=m(()=>t.location.split(" ").length>1?t.location:t.location+" center"),s=m(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),r=m(()=>t.transition?t.transition:e.value?"scale-transition":"fade-transition"),g=m(()=>b({"aria-describedby":o.value},t.activatorProps));return j(()=>{const y=E.filterProps(t);return v(E,b({ref:a,class:["v-tooltip",t.class],style:t.style,id:o.value},y,{modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,transition:r.value,absolute:!0,location:n.value,origin:s.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},u),{activator:l.activator,default:function(){for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];return l.default?.(...f)??t.text}})}),rt({},a)}});function ct(t,i){const l=typeof t=="string"?Y(t):t,e=ut(l,i);return{mounted:e,updated:e,unmounted(u){B(null,u)}}}function ut(t,i){return function(l,e,u){const c=typeof i=="function"?i(e):i,o=e.value?.text??e.value??c?.text,a=H(e.value)?e.value:{},n=()=>o??l.textContent,s=(u.ctx===e.instance.$?dt(u,e.instance.$)?.provides:u.ctx?.provides)??e.instance.$.provides,r=U(t,b(c,a),n);r.appContext=Object.assign(Object.create(null),e.instance.$.appContext,{provides:s}),B(r,l)}}function dt(t,i){const l=new Set,e=c=>{for(const o of c){if(!o)continue;if(o===t)return!0;l.add(o);let a;if(o.suspense?a=e([o.ssContent]):Array.isArray(o.children)?a=e(o.children):o.component?.vnode&&(a=e([o.component?.subTree])),a)return a;l.delete(o)}return!1};if(!e([i.subTree]))throw new Error("Could not find original vnode");const u=Array.from(l).reverse();for(const c of u)if(c.component)return c.component;return i}const M=ct(lt,t=>({activator:"parent",location:t.arg?.replace("-"," "),text:typeof t.value=="boolean"?void 0:t.value})),ft={class:"flex rounded-lg border border-gray-300 dark:border-gray-600",style:{margin:"2px"}},mt=["value"],pt={class:"w-full px-4 pb-3",style:{"font-size":"12px"}},vt=["innerHTML"],wt={__name:"EodashDatePicker",props:{hintText:{type:String,default:null}},setup(t){nt(a=>({cd569fa8:o.value}));const i=L((a,n)=>({get(){return a(),new Date(S.value).getTime()},set(s){n(),k.debug("Datepicker setting currentDate",S.value),S.value=new Date(s).toISOString()}})),l=D({input:"YYYY-MM-DD"}),e=q([]),{selectedStac:u}=z(N());G(u,async(a,n)=>{if(a&&n?.id!==a.id){k.debug("Datepicker selected STAC change triggered");const s=["#009E73","#0072B2","#E69F00","#CC79A7","#56B4E9","#D55E00"];e.splice(0,e.length);for(let r=0;r<w.length;r++){k.debug("Retrieving dates",w[r]),await w[r].fetchCollection();const g=[...new Set(w[r].getItems()?.reduce((y,d)=>{const f=Date.parse(d.datetime);return f&&y.push(new Date(f)),y},[]))];e.push({key:"id-"+r.toString()+Math.random().toString(16).slice(2),bar:{style:{backgroundColor:s[r%s.length]}},dates:g,content:{style:{color:"#000000","font-weight":"bold"}}})}}},{immediate:!0});function c(a){if(e.length){let n=a?1/0:-1/0;e.forEach(s=>{s?.dates&&s.dates.forEach(r=>{r instanceof Date&&(n=Math[a?"min":"max"](n,r.getTime()))})}),i.value=n===-1/0?Date.now():n===1/0?0:n}}const o=D("");return K(()=>{o.value=document.querySelector("eo-dash")?"translate3d(50px,-80px,0)":"translate3d(0px,-80px,0)"}),(a,n)=>(V(),Q(X,null,[v(C(tt),{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=s=>i.value=s),modelModifiers:{number:!0},masks:l.value,attributes:e},W({default:p(({inputValue:s,inputEvents:r})=>[x("div",ft,[x("input",b({value:s},Z(r,!0),{style:{margin:"1px"},class:"flex-grow px-1 py-1 bg-white dark:bg-gray-700"}),null,16,mt)])]),_:2},[t.hintText?{name:"footer",fn:p(()=>[x("div",pt,[x("span",{innerHTML:t.hintText},null,8,vt)])]),key:"0"}:void 0]),1032,["modelValue","masks","attributes"]),v(J,{align:"center",justify:"center",style:{"margin-top":"6px"}},{default:p(()=>[T((V(),P(_,{style:{padding:"0px","margin-right":"4px"},density:"compact",onClick:n[1]||(n[1]=s=>c(!0))},{default:p(()=>[v(A,{icon:[C(et)]},null,8,["icon"])]),_:1})),[[M,"Set date to oldest available dataset","bottom"]]),T((V(),P(_,{style:{padding:"0px","margin-left":"4px"},density:"compact",onClick:n[2]||(n[2]=s=>c(!1))},{default:p(()=>[v(A,{icon:[C(at)]},null,8,["icon"])]),_:1})),[[M,"Set date to latest available dataset","bottom"]])]),_:1})],64))}};export{wt as default};
